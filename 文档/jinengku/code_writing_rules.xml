<?xml version="1.0" encoding="UTF-8"?>
<code_writing_rules>

  <purpose>
    This file defines how new code must be written.
    It ensures consistency with the existing project.
  </purpose>

  <core_principle>
    Follow existing style.
    Reuse before creating.
    Consistency over creativity.
  </core_principle>

  <pre_check>
    <rule>Confirm context retrieval is completed.</rule>
    <rule>Confirm similar implementations were reviewed.</rule>
    <rule>Do not write code if context is incomplete.</rule>
  </pre_check>

  <architecture_rules>
    <rule>Follow the existing project architecture.</rule>
    <rule>Respect current folder structure and layering.</rule>
    <rule>Do not introduce new layers or patterns without explicit instruction.</rule>
  </architecture_rules>

  <naming_rules>
    <rule>Match existing naming conventions exactly.</rule>
    <rule>Follow current file naming style.</rule>
    <rule>Follow current function and class naming style.</rule>
    <rule>Follow existing type/interface naming patterns.</rule>
  </naming_rules>

  <reuse_rules>
    <rule>Search for reusable utilities before creating new ones.</rule>
    <rule>Reuse existing helpers, services, validators, mappers when possible.</rule>
    <rule>Do not duplicate logic already present in the project.</rule>
  </reuse_rules>

  <style_rules>
    <rule>Match formatting and indentation style.</rule>
    <rule>Match comment style.</rule>
    <rule>Match error handling style.</rule>
    <rule>Match logging style.</rule>
  </style_rules>

  <type_rules>
    <rule>Follow existing type definition patterns.</rule>
    <rule>Do not introduce inconsistent typing approaches.</rule>
  </type_rules>

  <behavior_rules>
    <rule>Do not refactor unrelated code unless required.</rule>
    <rule>Keep changes minimal and focused.</rule>
    <rule>Do not change naming or structure outside the task scope.</rule>
  </behavior_rules>

  <final_check>
    <check>Does this code match existing architecture?</check>
    <check>Does this code match naming conventions?</check>
    <check>Did you reuse existing utilities?</check>
    <check>Is the implementation minimal and consistent?</check>
  </final_check>

  <constraint>
    If these rules are not followed, stop and correct before returning output.
  </constraint>

</code_writing_rules>
