# PostgreSQL 新建表指南

## 步骤

### 1. 创建表定义文件

在 `src/shujuku/psqlshujuku/shujubiao_nr/` 下新建文件，命名格式：`shujubiao_表名.rs`

```rust
#[allow(non_upper_case_globals)]

use super::super::psqlshujukuzhuti::{Shujubiaodinyi, Ziduandinyi};

pub struct 表结构体名;

#[allow(non_upper_case_globals)]
const ziduanlie: &[Ziduandinyi] = &[
    Ziduandinyi { mingcheng: "字段名", nicheng: "中文昵称", jieshao: "字段说明", leixing: "PostgreSQL类型及约束", morenzhi: None },
];

impl Shujubiaodinyi for 表结构体名 {
    fn biaoming() -> &'static str { "表名" }
    fn biaonicheng() -> &'static str { "中文表名" }
    fn biaojieshao() -> &'static str { "表的用途说明" }
    fn ziduanlie() -> &'static [Ziduandinyi] { ziduanlie }
}
```

### 2. 注册模块

在 `src/shujuku/psqlshujuku/shujubiao_nr/mod.rs` 中添加：

```rust
pub mod shujubiao_表名;
```

### 3. 注册到初始化流程

在 `src/main.rs` 中：

- 顶部添加 `use` 导入新表结构体
- 在 `biaolie` 数组中追加一项：

```rust
Biaozhucexinxi {
    biaoming: 表结构体名::biaoming(),
    biaonicheng: 表结构体名::biaonicheng(),
    biaojieshao: 表结构体名::biaojieshao(),
    ziduanlie: 表结构体名::ziduanlie(),
},
```

## 命名规则

- 文件名：`shujubiao_` + 全小写拼音表名
- 结构体名：首字母大写拼音，禁止驼峰（如 `Yonghubiao`，不是 `YongHuBiao`）
- 字段 `mingcheng`：全小写拼音
- 字段 `nicheng`、`jieshao`、`biaojieshao`：中文
- `morenzhi`：有默认值填 `Some("值")`，无则 `None`
- `leixing`：PostgreSQL 标准类型 + 约束（如 `TEXT NOT NULL`、`TEXT PRIMARY KEY`）

## 注意事项

- 初始化时自动建表、同步字段（新增/删除）、写入元信息记录表
- 后续修改字段只需改 `ziduanlie`，重启即自动同步
- 禁止在代码块中间添加注释
